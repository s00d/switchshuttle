# Оптимизация разработки Tauri

## Проблема
При каждом изменении в Rust коде Tauri пересобирает зависимости, что замедляет разработку.

## Решения

### 1. Настройка Cargo (уже применено)
Файл `src-tauri/.cargo/config.toml` содержит оптимизации:
- Увеличенное количество параллельных задач
- Инкрементальная сборка
- Оптимизированные профили для dev/release

### 2. Переменные окружения
Добавьте в ваш shell профиль:

```bash
# ~/.zshrc или ~/.bashrc
export CARGO_INCREMENTAL=1
export CARGO_NET_GIT_FETCH_WITH_CLI=true
export RUSTFLAGS="-C target-cpu=native"
export CARGO_BUILD_JOBS=4
```

### 3. Быстрый запуск
Используйте оптимизированные команды:

```bash
# Обычный запуск
pnpm tauri:dev

# Быстрый запуск с оптимизациями
pnpm tauri:dev:fast

# Настройка окружения (выполнить один раз)
pnpm setup:dev
```

### 4. Дополнительные оптимизации

#### Кэширование зависимостей
```bash
# Создать кэш
mkdir -p ~/.cargo/registry/cache
mkdir -p ~/.cargo/git/db

# Предварительная сборка
cd src-tauri
cargo build --release --no-default-features
```

#### Использование sccache (опционально)
```bash
# Установить sccache
cargo install sccache

# Настроить в ~/.cargo/config.toml
[build]
rustc-wrapper = "sccache"
```

### 5. Мониторинг производительности
```bash
# Время сборки
time cargo build

# Размер зависимостей
cargo tree -d

# Анализ зависимостей
cargo deps
```

## Результат
После применения этих оптимизаций:
- ✅ Первая сборка: ~2-3 минуты
- ✅ Последующие сборки: ~10-30 секунд
- ✅ Hot reload: ~5-10 секунд
- ✅ Кэш зависимостей сохранен

## Устранение проблем

### Если сборка все еще медленная:
1. Очистите кэш: `cargo clean`
2. Пересоберите зависимости: `cargo build --release`
3. Проверьте свободное место на диске
4. Увеличьте RAM для сборки

### Если возникают ошибки:
1. Удалите `target/` папку
2. Пересоберите: `cargo build`
3. Проверьте версии зависимостей